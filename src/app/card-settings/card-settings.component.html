<div class="card-settings" [formGroup]="cardForm">
  <div class="section icons">
    <div class="section-line">
      <h4>Faction</h4>
      <div class="button-list">
        @for (faction of factionList; track faction) {
          @if (faction.name) {
            <app-icon-button [item]="faction"
                             (click)="setMainFaction(faction)"
                             [isActive]="faction.name === cardForm.get('mainFaction')?.value">
            </app-icon-button>
          }
        }
      </div>
    </div>

    <div class="section-line">
      <h4>Second Faction</h4>
      <div class="button-list">
        @for (faction of factionList; track faction) {
          @if (faction.name !== 'N') {
            <app-icon-button [item]="faction"
                             (click)="setSecondFaction(faction)"
                             [isActive]="faction.name === cardForm.get('secondFaction')?.value">
            </app-icon-button>
          }
        }
      </div>
    </div>

    <div class="two-sections">
      <div class="section-line">
        <h4>Frame</h4>
        <div class="button-list">
          @for (frame of frameList; track frame) {
            <app-icon-button [item]="frame" [imageHeight]="30" [imageWidth]="30"
                             (click)="setFrame(frame)"
                             [isActive]="frame.name === cardForm.get('frame')?.value">
            </app-icon-button>
          }
        </div>
      </div>

      <div class="section-line">
        <h4>Rarity</h4>
        <div class="button-list">
          @for (rarity of rarityList; track rarity) {
            <app-icon-button [item]="rarity" [imageHeight]="25" [imageWidth]="25"
                             (click)="setRarity(rarity)"
                             [isActive]="rarity.name === cardForm.get('rarity')?.value">
            </app-icon-button>
          }
        </div>
      </div>
    </div>

    <div class="section-line">
      <h4>Cardbacks</h4>
      <div class="button-list cardback-list">
        @for (cardback of cardbackList; track cardback) {
          <app-icon-button [item]="cardback" [imageHeight]="30" [imageWidth]="25"
                           (click)="setCardback(cardback)"
                           [isActive]="cardback.name === cardForm.get('cardback')?.value">
          </app-icon-button>
        }
      </div>
    </div>

    <div class="section-line">
      <h4>Type</h4>
      <div class="button-list">
        @for (type of typeList; track type) {
          <app-icon-button *ngIf="type.name !== 'N'" [item]="type"
                           (click)="setType(type)"
                           [isActive]="type.name === cardForm.get('type')?.value">
          </app-icon-button>
        }
      </div>
    </div>

    <div class="stat-line">
      <div class="stat-block">
        <img [ngSrc]="'assets/images/power.png'" [height]="38" [width]="38" alt="">
        <input type="text" formControlName="power">
      </div>
      <div class="stat-block">
        <img [ngSrc]="'assets/images/armor.png'" [height]="38" [width]="38" alt="">
        <input type="text" formControlName="armor">
      </div>
      <div class="stat-block">
        <img [ngSrc]="'assets/images/provision.png'" [height]="38" [width]="38" alt="">
        <input type="text" formControlName="provision">
      </div>
      <div class="stat-block">
        <h4>Font Size</h4>
        <input type="number" formControlName="fontSize">
      </div>
    </div>

    <div class="button-list" [style.justify-content]="'space-between'">
      <app-text-button [text]="'Load Image'" (click)="fileUpload.click()">
        <input type="file" [style.display]="'none'" (change)="uploadCardShirt($event)" #fileUpload accept="image/*">
      </app-text-button>

      <app-text-button [text]="'Copy Tab Character'" [cdkCopyToClipboard]="'ã…¤'">
      </app-text-button>
    </div>

  </div>

  <div class="section">
    <div class="section-line">
      <h4>Card Name</h4>
      <input formControlName="name">
    </div>

    <div class="section-line">
      <h4>Categories</h4>
      <input formControlName="categories">
    </div>

    <div class="section-line">
      <h4>
        Stats
        <app-icon-button (click)="toggleStat()" [item]="factionList[1]"
                         [imageHeight]="18" [imageWidth]="18"
                         [isActive]="cardForm.get('showStats')?.value">
        </app-icon-button>
      </h4>
      @if (cardForm.get('showStats')?.value) {
        <div class="stats">
          <div class="stat">
            <span>STR</span><input formControlName="STR" type="number">
          </div>
          <div class="stat">
            <span>DEX</span><input formControlName="DEX" type="number">
          </div>
          <div class="stat">
            <span>CON</span><input formControlName="CON" type="number">
          </div>
          <div class="stat">
            <span>INT</span><input formControlName="INT" type="number">
          </div>
          <div class="stat">
            <span>WIS</span><input formControlName="WIS" type="number">
          </div>
          <div class="stat">
            <span>CHA</span><input formControlName="CHA" type="number">
          </div>
        </div>
      }
    </div>

    <div class="section-line">
      <h4>Description</h4>
      <quill-editor class="main-description" formControlName="description">
      </quill-editor>
    </div>

    <div class="section-line">
      <h4>Keywords</h4>
      <quill-editor class="secondary-description" formControlName="keywords">
      </quill-editor>
    </div>

    <div class="section-line">
      <h4>Flavour text</h4>
      <quill-editor class="secondary-description" formControlName="flavourText">
      </quill-editor>
    </div>

    <div class="section-line">
      <h4>Templates</h4>
      <div class="button-list">
        <app-text-button [text]="'Spell'" (click)="setSpellTemplate()"></app-text-button>
        <app-text-button [text]="'Character'" (click)="setCharacterTemplate()"></app-text-button>
      </div>
    </div>
  </div>
</div>
